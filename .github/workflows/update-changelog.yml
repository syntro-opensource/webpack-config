name: Update changelog
on:
  push:
    branches: [ feature-auto-changelog ]
jobs:
  update-changelog:
    runs-on: ubuntu-latest
    steps:
    - name: checkout
      uses: actions/checkout@v2
    # - name: generate changelog
    #   uses: docker://ferrarimarco/github-changelog-generator
    #   run: >-
    #     --token ${{ secrets.GITHUB_TOKEN }}
    #     --user $(echo "$GITHUB_REPOSITORY" | cut -d / -f 1 )
    #     --project $(echo "$GITHUB_REPOSITORY" | cut -d / -f 2- )
      # run: |
      #
    - uses: syntro-opensource/github-changelog-generator-action@v2.1.1
      with:
        token: ${{ secrets.GITHUB_TOKEN }}
        output: AUTO_CHANGELOG.md
        releaseBranch: master
        pullRequests: true
        configureSections: '{"dependencies":{"prefix":"**⬆️\ Dependency\ updates:**","labels":["dependencies"]}}'
